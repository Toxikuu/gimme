name: kernel
version: "6.11-rc7"
# this url is for the mainline kernel
url: "https://git.kernel.org/torvalds/t/linux-${version}.tar.gz"
get: |
  make mrproper &&
  make oldconfig &&
  make &&
  sudo make install &&
  sudo make modules_install &&
  sudo cp -iv arch/x86/boot/bzImage /boot/vmlinuz-${version}-tox
  sudo cp -iv System.map /boot/System.map-${version}
  sudo cp -iv .config /boot/config-${version}
  sudo cp -iv /efi/EFI/LFS/tox64.efi{,.bak}
  sudo cp -iv /boot/vmlinuz-${version}-tox /efi/EFI/LFS/tox64.efi
remove: echo "Kernel removal not supported"
